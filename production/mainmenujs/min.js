THREE.OrbitControls=function(object,domElement){this.object=object;this.domElement=(domElement!==undefined)?domElement:document;this.enabled=!0;this.center=new THREE.Vector3();this.userZoom=!0;this.userZoomSpeed=1.0;this.userRotate=!0;this.userRotateSpeed=1.0;this.userPan=!0;this.userPanSpeed=2.0;this.autoRotate=!1;this.autoRotateSpeed=2.0;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minDistance=0;this.maxDistance=Infinity;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ROTATE:65,ZOOM:83,PAN:68};var scope=this;var EPS=0.000001;var PIXELS_PER_ROUND=1800;var rotateStart=new THREE.Vector2();var rotateEnd=new THREE.Vector2();var rotateDelta=new THREE.Vector2();var zoomStart=new THREE.Vector2();var zoomEnd=new THREE.Vector2();var zoomDelta=new THREE.Vector2();var phiDelta=0;var thetaDelta=0;var scale=1;var lastPosition=new THREE.Vector3();var STATE={NONE:-1,ROTATE:0,ZOOM:1,PAN:2};var state=STATE.NONE;var changeEvent={type:'change'};this.rotateLeft=function(angle){if(angle===undefined){angle=getAutoRotationAngle()}
thetaDelta-=angle};this.rotateRight=function(angle){if(angle===undefined){angle=getAutoRotationAngle()}
thetaDelta+=angle};this.rotateUp=function(angle){if(angle===undefined){angle=getAutoRotationAngle()}
phiDelta-=angle};this.rotateDown=function(angle){if(angle===undefined){angle=getAutoRotationAngle()}
phiDelta+=angle};this.zoomIn=function(zoomScale){if(zoomScale===undefined){zoomScale=getZoomScale()}
scale/=zoomScale};this.zoomOut=function(zoomScale){if(zoomScale===undefined){zoomScale=getZoomScale()}
scale*=zoomScale};this.pan=function(distance){distance.transformDirection(this.object.matrix);distance.multiplyScalar(scope.userPanSpeed);this.object.position.add(distance);this.center.add(distance)};this.update=function(){var position=this.object.position;var offset=position.clone().sub(this.center);var theta=Math.atan2(offset.x,offset.z);var phi=Math.atan2(Math.sqrt(offset.x*offset.x+offset.z*offset.z),offset.y);if(this.autoRotate){this.rotateLeft(getAutoRotationAngle())}
theta+=thetaDelta;phi+=phiDelta;phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,phi));phi=Math.max(EPS,Math.min(Math.PI-EPS,phi));var radius=offset.length()*scale;radius=Math.max(this.minDistance,Math.min(this.maxDistance,radius));offset.x=radius*Math.sin(phi)*Math.sin(theta);offset.y=radius*Math.cos(phi);offset.z=radius*Math.sin(phi)*Math.cos(theta);position.copy(this.center).add(offset);this.object.lookAt(this.center);thetaDelta=0;phiDelta=0;scale=1;if(lastPosition.distanceTo(this.object.position)>0){this.dispatchEvent(changeEvent);lastPosition.copy(this.object.position)}};function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}
function getZoomScale(){return Math.pow(0.95,scope.userZoomSpeed)}
function onMouseDown(event){if(scope.enabled===!1)return;if(scope.userRotate===!1)return;event.preventDefault();if(state===STATE.NONE)
{if(event.button===0)
state=STATE.ROTATE;if(event.button===1)
state=STATE.ZOOM;if(event.button===2)
state=STATE.PAN}
if(state===STATE.ROTATE){rotateStart.set(event.clientX,event.clientY)}else if(state===STATE.ZOOM){zoomStart.set(event.clientX,event.clientY)}else if(state===STATE.PAN){}
document.addEventListener('mousemove',onMouseMove,!1);document.addEventListener('mouseup',onMouseUp,!1)}
function onMouseMove(event){if(scope.enabled===!1)return;event.preventDefault();if(state===STATE.ROTATE){rotateEnd.set(event.clientX,event.clientY);rotateDelta.subVectors(rotateEnd,rotateStart);scope.rotateLeft(2*Math.PI*rotateDelta.x/PIXELS_PER_ROUND*scope.userRotateSpeed);scope.rotateUp(2*Math.PI*rotateDelta.y/PIXELS_PER_ROUND*scope.userRotateSpeed);rotateStart.copy(rotateEnd)}else if(state===STATE.ZOOM){zoomEnd.set(event.clientX,event.clientY);zoomDelta.subVectors(zoomEnd,zoomStart);if(zoomDelta.y>0){scope.zoomIn()}else{scope.zoomOut()}
zoomStart.copy(zoomEnd)}else if(state===STATE.PAN){var movementX=event.movementX||event.mozMovementX||event.webkitMovementX||0;var movementY=event.movementY||event.mozMovementY||event.webkitMovementY||0;scope.pan(new THREE.Vector3(-movementX,movementY,0))}}
function onMouseUp(event){if(scope.enabled===!1)return;if(scope.userRotate===!1)return;document.removeEventListener('mousemove',onMouseMove,!1);document.removeEventListener('mouseup',onMouseUp,!1);state=STATE.NONE}
function onMouseWheel(event){if(scope.enabled===!1)return;if(scope.userZoom===!1)return;var delta=0;if(event.wheelDelta){delta=event.wheelDelta}else if(event.detail){delta=-event.detail}
if(delta>0){scope.zoomOut()}else{scope.zoomIn()}}
function onKeyDown(event){if(scope.enabled===!1)return;if(scope.userPan===!1)return;switch(event.keyCode){case scope.keys.ROTATE:state=STATE.ROTATE;break;case scope.keys.ZOOM:state=STATE.ZOOM;break;case scope.keys.PAN:state=STATE.PAN;break}}
function onKeyUp(event){switch(event.keyCode){case scope.keys.ROTATE:case scope.keys.ZOOM:case scope.keys.PAN:state=STATE.NONE;break}}
this.domElement.addEventListener('contextmenu',function(event){event.preventDefault()},!1);this.domElement.addEventListener('mousedown',onMouseDown,!1);this.domElement.addEventListener('mousewheel',onMouseWheel,!1);this.domElement.addEventListener('DOMMouseScroll',onMouseWheel,!1);window.addEventListener('keydown',onKeyDown,!1);window.addEventListener('keyup',onKeyUp,!1)};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);var Stats=function(){var startTime=Date.now(),prevTime=startTime;var ms=0,msMin=Infinity,msMax=0;var fps=0,fpsMin=Infinity,fpsMax=0;var frames=0,mode=0;var container=document.createElement('div');container.id='stats';container.addEventListener('mousedown',function(event){event.preventDefault();setMode(++ mode%2)},!1);container.style.cssText='width:80px;opacity:0.9;cursor:pointer';var fpsDiv=document.createElement('div');fpsDiv.id='fps';fpsDiv.style.cssText='padding:0 0 3px 3px;text-align:left;background-color:#002';container.appendChild(fpsDiv);var fpsText=document.createElement('div');fpsText.id='fpsText';fpsText.style.cssText='color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';fpsText.innerHTML='FPS';fpsDiv.appendChild(fpsText);var fpsGraph=document.createElement('div');fpsGraph.id='fpsGraph';fpsGraph.style.cssText='position:relative;width:74px;height:30px;background-color:#0ff';fpsDiv.appendChild(fpsGraph);while(fpsGraph.children.length<74){var bar=document.createElement('span');bar.style.cssText='width:1px;height:30px;float:left;background-color:#113';fpsGraph.appendChild(bar)}
var msDiv=document.createElement('div');msDiv.id='ms';msDiv.style.cssText='padding:0 0 3px 3px;text-align:left;background-color:#020;display:none';container.appendChild(msDiv);var msText=document.createElement('div');msText.id='msText';msText.style.cssText='color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';msText.innerHTML='MS';msDiv.appendChild(msText);var msGraph=document.createElement('div');msGraph.id='msGraph';msGraph.style.cssText='position:relative;width:74px;height:30px;background-color:#0f0';msDiv.appendChild(msGraph);while(msGraph.children.length<74){var bar=document.createElement('span');bar.style.cssText='width:1px;height:30px;float:left;background-color:#131';msGraph.appendChild(bar)}
var setMode=function(value){mode=value;switch(mode){case 0:fpsDiv.style.display='block';msDiv.style.display='none';break;case 1:fpsDiv.style.display='none';msDiv.style.display='block';break}}
var updateGraph=function(dom,value){var child=dom.appendChild(dom.firstChild);child.style.height=value+'px'}
return{REVISION:11,domElement:container,setMode:setMode,begin:function(){startTime=Date.now()},end:function(){var time=Date.now();ms=time-startTime;msMin=Math.min(msMin,ms);msMax=Math.max(msMax,ms);msText.textContent=ms+' MS ('+msMin+'-'+msMax+')';updateGraph(msGraph,Math.min(30,30-(ms/200)*30));frames ++;if(time>prevTime+1000){fps=Math.round((frames*1000)/(time-prevTime));fpsMin=Math.min(fpsMin,fps);fpsMax=Math.max(fpsMax,fps);fpsText.textContent=fps+' FPS ('+fpsMin+'-'+fpsMax+')';updateGraph(fpsGraph,Math.min(30,30-(fps/100)*30));prevTime=time;frames=0}
return time},update:function(){startTime=this.end()}}};var stats,scene,camera,renderer,controls,sound;var scene2,camera2,videoTexture,video;var sceneStatus,musicStatus=1;var cube;var raycaster=new THREE.Raycaster();var mouseVector=new THREE.Vector3(),INTERSECTED;var parentmenu;window.addEventListener('resize',onWindowResize,!1);window.addEventListener('mousemove',onMouseMove,!1);window.addEventListener('mousedown',onDocumentMouseDown,!1);loadingPage();init();animate();function init(){stats=initStats();scene=new THREE.Scene();sceneStatus=1;renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight);renderer.setClearColor(0x3d3b3a,1);document.body.appendChild(renderer.domElement);camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,0.1,1000);camera.position.set(0,0,50);scene.add(camera);var menuTexture=new THREE.TextureLoader().load('mainmenujs/texture/blood-stain-horror-texture.jpg');var geometry=new THREE.PlaneGeometry(150,100);var material=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,map:menuTexture});var plane=new THREE.Mesh(geometry,material);plane.position.set(0,0,-1);plane.rotation.y=Math.PI;plane.receiveShadow=!0;scene.add(plane);var spotLight=new THREE.SpotLight(0xffffff,0.65);spotLight.position.set(0,10,100);spotLight.penumbra=0.2;spotLight.castShadow=!0;spotLight.shadow.mapSize.width=1024;spotLight.shadow.mapSize.height=1024;spotLight.shadow.camera.near=10;spotLight.shadow.camera.far=200;var spotLightTarget=new THREE.Object3D();camera.add(spotLightTarget);spotLightTarget.position.set(0,0,0);spotLight.target=plane;scene.add(spotLight);var listener=new THREE.AudioListener();camera.add(listener);sound=new THREE.Audio(listener);var audioLoader=new THREE.AudioLoader();audioLoader.load('mainmenujs/sound/hell-Mike.ogg',function(buffer){sound.setBuffer(buffer);sound.setLoop(!0);sound.setVolume(1.0);sound.play()});var fontLoader=new THREE.FontLoader();fontLoader.load('mainmenujs/fonts/helvetiker_regular.typeface.json',function(font){var textstart=new THREE.TextGeometry('Start',{font:font,size:3,height:2,curveSegments:5,bevelEnabled:!0,bevelThickness:0.1,bevelSize:0.1,bevelSegments:1,});textstart.computeBoundingBox();var textMaterial=new THREE.MeshLambertMaterial({color:0xede2dc});text=new THREE.Mesh(textstart,textMaterial);text.position.x=2;text.position.y=0;text.position.z=0;text.userData.name="start";var textcredit=new THREE.TextGeometry('Credits',{font:font,size:3,height:2,curveSegments:5,bevelEnabled:!0,bevelThickness:0.2,bevelSize:0.1,bevelSegments:1,});textcredit.computeBoundingBox();var textCreditMaterial=new THREE.MeshLambertMaterial({color:0xede2dc});text2=new THREE.Mesh(textcredit,textCreditMaterial);text2.position.x=0;text2.position.y=-15;text2.position.z=0;text2.userData.name='credits';var textmusicon=new THREE.TextGeometry('Music: ON',{font:font,size:3,height:2,curveSegments:5,bevelEnabled:!0,bevelThickness:0.2,bevelSize:0.1,bevelSegments:1,});var textMusicOnMaterial=new THREE.MeshLambertMaterial({color:0xede2dc});text4=new THREE.Mesh(textmusicon,textMusicOnMaterial);text4.position.x=-2;text4.position.y=-7;text4.position.z=0;text4.userData.name='musicon';var textmusicoff=new THREE.TextGeometry('Music: OFF',{font:font,size:3,height:2,curveSegments:5,bevelEnabled:!0,bevelThickness:0.2,bevelSize:0.1,bevelSegments:1,});var textMusicOffMaterial=new THREE.MeshLambertMaterial({color:0xede2dc});text5=new THREE.Mesh(textmusicoff,textMusicOffMaterial);text5.position.x=-3;text5.position.y=-7;text5.position.z=0;text5.userData.name='musicoff';text5.visible=!1;parentmenu=new THREE.Object3D();parentmenu.add(text);parentmenu.add(text2);parentmenu.add(text4);parentmenu.add(text5);scene.add(parentmenu)});fontLoader.load('mainmenujs/fonts/Something_Strange_Regular.json',function(font){var texttitle=new THREE.TextGeometry('Fear in The Dark',{font:font,size:5,height:2,});var textTitleMaterial=new THREE.MeshLambertMaterial({color:0xea1409});text3=new THREE.Mesh(texttitle,textTitleMaterial);text3.position.x=-10;text3.position.y=8;text3.position.z=0;parenttitle=new THREE.Object3D();parenttitle.add(text3);scene.add(parenttitle)});scene2=new THREE.Scene();var spotLight2=new THREE.SpotLight(0xffffff);spotLight2.position.set(10,0,60);scene2.add(spotLight2);camera2=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,0.1,1000);camera2.position.set(0,0,50);scene2.add(camera2);video=document.getElementById('videoSeoul');videoTexture=new THREE.VideoTexture(video);videoTexture.minFilter=THREE.LinearFilter;videoTexture.magFilter=THREE.LinearFilter;videoTexture.format=THREE.RGBFormat;geometry=new THREE.PlaneGeometry(60,30);videoMaterial=new THREE.MeshLambertMaterial({map:videoTexture});videoMesh=new THREE.Mesh(geometry,videoMaterial);videoMesh.position.set(0,5,2);scene2.add(videoMesh);var bloodTexture=new THREE.TextureLoader().load('mainmenujs/texture/stockvault-grunge-stone-wall-texture.jpg');var geometry2=new THREE.PlaneGeometry(150,100);var material2=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,map:bloodTexture});var plane2=new THREE.Mesh(geometry2,material2);plane2.position.set(0,0,-1);plane2.receiveShadow=!0;scene2.add(plane2);fontLoader.load('mainmenujs/fonts/Blood_Lust_Regular.json',function(font){var textback=new THREE.TextGeometry('Created By: Edwin (109), Taufiq (016), Rahma (117), Natasha (183)',{font:font,size:4,height:2,curveSegments:2,bevelEnabled:!0,bevelThickness:0.2,bevelSize:0.2,bevelSegments:5,});var textBackMaterial=new THREE.MeshPhongMaterial({color:0xdb160f});text6=new THREE.Mesh(textback,textBackMaterial);text6.position.x=30;text6.position.y=-15;text6.position.z=0;text6.userData.name='createdby';parentcredit=new THREE.Object3D();parentcredit.add(text6);scene2.add(parentcredit)});console.log('terserah')}
function animate(){stats.update();requestAnimationFrame(animate);render();checkScene()}
var t=0;function render(){if(sceneStatus==1)renderer.render(scene,camera);else if(sceneStatus==2){renderer.render(scene2,camera2);text6.position.x-=0.1}}
function initStats(){var stats=new Stats();stats.setMode(0);stats.domElement.style.position='absolute';stats.domElement.style.left='5px';stats.domElement.style.top='0px';document.getElementById("Stats-output").appendChild(stats.domElement);return stats}
function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)}
function onMouseMove(event){event.preventDefault();mouseX=event.clientX-window.innerWidth/2;mouseY=event.clientY-window.innerHeight/2;camera.position.x+=(mouseX-camera.position.x)*0.0002;camera.position.y+=(mouseY-camera.position.y)*0.0002;camera.lookAt(scene.position);mouseVector.x=(event.clientX/window.innerWidth)*2-1;mouseVector.y=-(event.clientY/window.innerHeight)*2+1;raycaster.setFromCamera(mouseVector,camera);var intersects=raycaster.intersectObjects(parentmenu.children);if(intersects.length>0){if(INTERSECTED!=intersects[0].object){if(INTERSECTED)INTERSECTED.material.color.setHex(INTERSECTED.material.color.getHex());INTERSECTED=intersects[0].object;console.log(INTERSECTED);INTERSECTED.currentHex=INTERSECTED.material.color.getHex();INTERSECTED.material.color.setHex(0xd40a2e)}}else{if(INTERSECTED)INTERSECTED.material.color.setHex(INTERSECTED.currentHex);INTERSECTED=null}}
function onDocumentMouseDown(event){event.preventDefault();mouseVector.x=(event.clientX/window.innerWidth)*2-1;mouseVector.y=-(event.clientY/window.innerHeight)*2+1;raycaster.setFromCamera(mouseVector,camera);var intersects=raycaster.intersectObjects(parentmenu.children);if(intersects.length>0){if(intersects[0].object.userData.name=="credits"){sceneStatus=2;text.visible=!1;text2.visible=!1;video.play()}
else if(intersects[0].object.userData.name=="musicon"){text4.visible=!1;text5.visible=!0;musicStatus=0;if(musicStatus==0)sound.pause()}
else if(intersects[0].object.userData.name=="musicoff"){text4.visible=!0;text5.visible=!1;musicStatus=1;if(musicStatus==1)sound.play()}
else if(intersects[0].object.userData.name=="start"){document.location.href='index_min.html'}}}
function loadingPage(){var img=document.createElement("img");img.setAttribute("src","http://1.bp.blogspot.com/-P12RJWD48B8/UI_-Pg19KeI/AAAAAAAAAlc/0jCpFfMhb_M/s1600/loading.gif");img.setAttribute("width",window.innerWidth);img.setAttribute("height",window.innerHeight);img.setAttribute("alt","Loading");img.setAttribute("id","loading");var divimg=document.getElementById('loading');divimg.appendChild(img);setTimeout(function(){img.style.display="none"},5000)}
function creditBack(){sceneStatus=1;text.visible=!0;text2.visible=!0;video=document.getElementById('videoSeoul');video.pause();if(musicStatus==1){sound.play();text4.visible=!0;text5.visible=!1}
else if(musicStatus==0){sound.pause();text4.visible=!1;text5.visible=!0}}
function checkScene(){if(sceneStatus==1){var backBtn=document.getElementById('backButton');backBtn.style.visibility="hidden";video=document.getElementById('videoSeoul');video.pause()}
else if(sceneStatus==2){sound.pause();var backBtn=document.getElementById('backButton');backBtn.style.visibility="visible"}}